<template name="menu">
  <div class="row">
    <div id="cart-notification" class="small-12 columns center">
      <a href="" id="current_cart"><h4>Your cart's at the bottom!</h4></a>
    </div>
      <div class="small-12 medium-8 large-9 columns">

        {{ #if isInRole 'admin'}}
          <a href="/new"> <button> Add item to menu </button> </a>
          <a href="/admin"> <button> Back to admin panel </button></a>
          <button id="button-new-group"> New Group </button>

          {{#if creatingGroup}}
            <input type="text" id="text-group-name" placeholder="Group Name"/>
            <button id="button-new-group-submit"> Submit </button>
          {{/if}}
          <h4> Groups Visible</h4>
          {{#each groups}}
            <div class="row">
              [<a>delete</a>] {{name}} <input type="checkbox"/>
            </div>
          {{/each}}
        {{ /if }}

        {{ #each items }}
          {{ #if isInRole 'admin' }}
            <div class="row">
              <a href="/edit/{{_id}}"> Edit Item </a>
            </div>
            <div class="row">
              <a href="#" class="delete"> Delete Item </a>
            </div>
            <div class="row">
              Item Visible <input type="checkbox" class="visible-checkbox" id="visible-checkbox-{{_id}}"/>
            </div>
            <div class="row">
              <p> Group </p>
              <select value="{{group}}" id="select-item-group-{{_id}}" class="select-item-group">
                <option value="none"> none </option>
                {{#each groups}}
                  <option value="{{name}}"> {{name}} </option>
                {{/each}}
              </select>
            </div>
          {{ /if }}
          <div class="menu-item-wrapper row bordered">
            <div class="small-2 columns text-center menu-up-down">

              <div class="">
                <i class="arrow fa fa-3x fa-chevron-circle-up menu-item-up" id="item-{{_id}}"></i>
              </div>
              <div id="quantity-style" class="text-center menu-item-quantity">{{quantity _id}}</div>
              <div>
                <i class="arrow fa fa-3x fa-chevron-circle-down menu-item-down" id="item-{{_id}}"></i>
              </div>

            </div>
            <div class="small-4 medium-3 columns" id="menu-item">
              <img src="{{imageUrl}}"/>
            </div>
            <div class="small-6 medium-7 columns">
              <div class="itemName" id="show">
                <h2>{{name}}</h2>
                <div class="row">
                  <div class="small-6 row" id="price">
                    <p>{{description}}</p>
                  </div>
                  <div class="small-6 row">
                    <p id="price">
                    ${{price}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{/each}}
      </div>

      <!-- this is a fix for the overlapping cart panel on the menu -->
      <div id="cart-spacer-hack" class="small-12 medium-3 columns">
      </div>

      <div id="cart-wrapper" class="small-12 medium-3 columns">
        <div>
          {{#each cartItems}}
            <div class="row">
              <div class="column small-9 medium-9 large-9">
                <h4>{{cartQuantity}} x {{name}}</h4>
              </div>
              <div class="column small-3 medium-3 large-3">
                <h4> ${{multPrice cartQuantity price}} </h4>
              </div>
            </div>
          {{/each}}
          <h4>
            Total: ${{total}}
          </h4>
          <h4>
            With Tax: ${{totalWithTax}}
          </h4>
            {{ #if disableButton}}
              <a href="#">
                <button id="checkout" type="submit" disabled="disabled"> Add stuff to cart! </button>
              </a>
            {{ else }}
              {{ #if openNow}}
                <a href="/checkout">
                  <button id="checkout" type="submit"> Checkout </button>
                </a>
              {{ else }}
                <a href="/checkout">
                  <button id="checkout" type="submit"> Pre-Order! </button>
                </a>
              {{ /if}}
            {{ /if}}
        </div>
      </div>
    </div>
</template>